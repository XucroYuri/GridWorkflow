# PLAN-07_DATA_FUTURE_MYSQL (数据层预留)

**目标**: 预留 MySQL 接入点，便于未来迁移到云服务器。

## 范围
**包含**:
- Repository 接口定义
- 数据模型草案 (Prompt, Media, Task)

**不包含**:
- 实际数据库建表
- ORM 选型落地

## 关键约束
- 只定义接口，不实现
- 与 COS URL 绑定字段必须保留

## Agent 风险点
- 不要在未规划前引入 ORM
- 不要破坏现有无持久化策略

## 验收
- 接口定义完整，可用于后续实现

## PDCA 钩子
- **Plan**: 冻结“仅定义接口、不落 ORM/不建表”的边界，明确必须保留与 COS URL 绑定字段。
- **Do**: 输出 Repository 接口与最小数据模型草案，避免过度设计。
- **Check**: 通过“可被业务层调用但暂不可用”的方式验证接口形态（例如返回 NotImplementedError 的预期行为）。
- **Act**: 若出现持久化需求外溢，先补齐使用场景与数据一致性要求，再选择数据库与 ORM 方案。

## Agent 上下文注入包
- **负责人团队**: Codex (后端)
- **本阶段目标**: 定义未来可替换的数据层接口与模型草案，不落地具体实现。
- **输入**: 本文档、`ARCH_REFACTOR_PLAN.md` 的数据层预留约束、对象存储 URL 字段约定。
- **输出**: Repository 接口与模型草案（仅定义）、业务层调用点预留。
- **冻结约束**:
  - 只定义接口，不实现（返回 `NotImplementedError`）
  - 与 COS URL 绑定字段必须保留
- **禁止事项（高风险）**:
  - 引入 ORM 或开始建表
  - 改动现有“无持久化”策略并造成行为变化
- **验收 Checklist**:
  - 接口定义完整可被业务层调用
  - 未实现路径行为符合预期（明确错误）
- **回滚策略**:
  - 若接口形态不合适，回滚到更小的最小接口集合再迭代扩展。
